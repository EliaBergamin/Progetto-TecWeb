<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Scrivi una recensione</title>
  <meta name="description" content="Qui puoi inserire una recensione
    se hai visitato il museo o hai fatto il virtual tour">
  <meta name="keywords" content="recensione,museo,virtual tour,visita,cardgame">
    <link rel="stylesheet" href="../css/style.css" media="screen">
  <link rel="stylesheet" href="../css/middle.css" media="screen and (max-width: 1024px)">
  <link rel="stylesheet" href="../css/mini.css" media="screen and (max-width: 768px)">
  <link rel="stylesheet" href="../css/print.css" media="print">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="../images/pokeball.ico" type="image/x-icon">
  <script type="text/javascript" src="../js/script.js"></script>
  <script>
    console.log(document.getElementsByName("rating"));
    function reset_span() {
      inputs = document.getElementsByName("rating");
      let index = 4, found = 0;
      for (; index >= 0 && !found; index--) {
        const element = inputs[index];
        if (element.checked) {
          found = index + 1;
        }
      }
      console.log(found);
      for (let i = 1; i <= found; i++) {
        let currentId = "voto-" + i.toString();
        document.getElementById(currentId).classList.replace("ahead", "behind");
      }
      for (let i = found + 1; i <= 5; i++) {
        let currentId = "voto-" + i.toString();
        document.getElementById(currentId).classList.replace("behind", "ahead");
      }
      let giudizi = [
        "", "Terribile", "Non soddisfacente", "Nella media", "Molto soddisfacente", "Eccellente"
      ];
      document.getElementById("giudizio").innerText = giudizi[found];
    }
    function change_span(id) {
      let voto2giudizio = {
        '1': "Terribile",
        '2': "Non soddisfacente",
        '3': "Nella media",
        '4': "Molto soddisfacente",
        '5': "Eccellente"
      };
      let voto = parseInt(id.charAt(5));
      console.log(voto);
      document.getElementById("giudizio").innerText = voto2giudizio[voto];
      for (let i = 1; i <= voto; i++) {
        let currentId = "voto-" + i.toString();
        document.getElementById(currentId).classList.replace("ahead", "behind");
      }
      for (let i = voto + 1; i <= 5; i++) {
        let currentId = "voto-" + i.toString();
        document.getElementById(currentId).classList.replace("behind", "ahead");
      }
    }
    function addEventListeners(item) {
      item.addEventListener("click", function () { change_span(item.id); console.log(item.id); });
      item.addEventListener("mouseover", function () { change_span(item.id); console.log(item.id); });
      item.addEventListener("mouseleave", reset_span);
    }
  </script>
</head>

<body>
  <a id="top-help" class="help nascosto" href="#primoContenuto">Vai al contenuto</a>
  <header>
    <h1>Museo Cartoni Animati</h1>
    <button id="hamb" class="hamToggle" data-hambOn="false" type="button" onclick="hambToggle()">Menù</button>
  </header>

  <nav id="breadcrumb">
    <p>
      Ti trovi in: <a lang="en" href="index.php">Home</a> &gt;
      <a href="recensioni.php">Recensioni</a> &gt; Scrivi una recensione
    </p>
  </nav>

  <nav id="menu" class="hamToggle" data-hambOn="false">
    <ul>
      <li><a href="index.php" lang="en">Home</a></li>
      <li><a href="mostre.php">Le mostre</a></li>
      <li><a href="virtual_tour.php" lang="en">Virtual Tour</a></li>
      <li><a href="prenotazione.php">Prenotazione</a></li>
      <li><a href="recensioni.php">Recensioni</a></li>
      <li><a href="registrazione.php">Registrazione</a></li>
    </ul>
  </nav>

  <main id="primoContenuto" class="compilazione recensisci">
    <div class="contenitoreCompilazione" id="contenitoreRecensione">
      <h1>Recensisci la tua visita</h1>
      <form action="effettuarecensione.php" method="post" class="formCompilazione">
        <fieldset>
          <legend>Come hai visitato il museo?</legend>
          <label>
            <input type="radio" name="tipo" value="museo" required>
            Sono andato al museo
          </label>
          <label>
            <input type="radio" name="tipo" value="virtual">
            Ho scelto il Virtual Tour
          </label>
        </fieldset>
        <label for="data-visita" class="domandaRecensione">Quando hai effettuato la visita?</label>
        <input type="date" name="data-visita" id="data-visita" required>
        <fieldset id="rating-fs">
          <legend>Come valuteresti la tua esperienza?</legend>
          <div class="rating-option">
            <input type="radio" name="rating" class="ahead" id="voto-1" value="1">
            <label for="voto-1" class="nascosto">Terribile</label>
          </div>
          <div class="rating-option">
            <input type="radio" name="rating" class="ahead" id="voto-2" value="2">
            <label for="voto-2" class="nascosto">Non soddisfacente</label>
          </div>
          <div class="rating-option">
            <input type="radio" name="rating" class="ahead" id="voto-3" value="3">
            <label for="voto-3" class="nascosto">Nella media</label>
          </div>
          <div class="rating-option">
            <input type="radio" name="rating" class="ahead" id="voto-4" value="4">
            <label for="voto-4" class="nascosto">Molto soddisfacente</label>
          </div>
          <div class="rating-option">
            <input type="radio" name="rating" class="ahead" id="voto-5" value="5">
            <label for="voto-5" class="nascosto">Eccellente</label>
          </div>
          <span id="giudizio"></span>
        </fieldset>
        <label for="descrizione" class="domandaRecensione">Descrivi la tua visita</label>
        <textarea name="descrizione" id="descrizione" minlength="100" rows="8" cols="20"
          placeholder="L'opera che mi ha colpito di più è stata..."></textarea>
        <input type="submit" value="Invia" aria-label="Invia">
      </form>
    </div>
  </main>
  <a class="help" id="torna-su" href="#">Torna su</a>
  <footer>
    <h2>Museo Cartoni Animati</h2>
    <dl>
      <dt> <abbr title="telefono">Tel</abbr>: </dt>
      <dd><a href="tel:+39123456789">123456789</a> </dd>
      <dt> <span lang="en">Email: </span> </dt>
      <dd> <a href="mailto:info@dominioImmaginario.com">info@dominioImmaginario.comm</a> </dd>
      <dt> Indirizzo: </dt>
      <dd>
        <a href="https://maps.app.goo.gl/xqD3pfvXG4ockxUeA">Via Luigi Luzzatti,
          <abbr title="Numero civico">n.</abbr> 8, 35121 Padova</a>
      </dd>
    </dl>
    <!--         <a href="" lang="en">Privacy Link TODO</a>
-->
    <p id="tab-descr" class="nascosto">La tabella contiene gli orari di apertura del museo</p>
    <table id="orari-museo" title="Orari del museo" aria-describedby="tab-descr">
      <caption>Orari del Museo</caption>
      <thead>
        <tr>
          <td></td>
          <th scope="col">Mattina</th>
          <th scope="col">Pomeriggio</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th scope="row">Lunedì</th>
          <td><time datetime="09:00">09:00</time> - <time datetime="12:00">12:00</time></td>
          <td><time datetime="14:00">14:00</time> - <time datetime="19:00">19:00</time></td>
        </tr>
        <tr>
          <th scope="row">Martedì</th>
          <td><time datetime="09:00">09:00</time> - <time datetime="12:00">12:00</time></td>
          <td><time datetime="14:00">14:00</time> - <time datetime="19:00">19:00</time></td>
        </tr>
        <tr>
          <th scope="row">Sabato</th>
          <td><time datetime="08:00">08:00</time> - <time datetime="13:00">13:00</time></td>
          <td><time datetime="14:00">14:00</time> - <time datetime="20:00">20:00</time></td>
        </tr>
        <tr>
          <th scope="row">Domenica</th>
          <td><time datetime="08:00">08:00</time> - <time datetime="13:00">13:00</time></td>
          <td><time datetime="14:00">14:00</time> - <time datetime="22:00">22:00</time></td>
        </tr>
      </tbody>
    </table>
  </footer>
  <script>
    document.getElementsByName("rating").forEach(addEventListeners);
  </script>
</body>

</html>